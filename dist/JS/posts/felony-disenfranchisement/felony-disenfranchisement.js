import scroller from"/dist/JS/scrollytelling/scroller.js";const margin={top:50,right:15,bottom:70,left:55};let map,histogram,histogramData,width=document.getElementById("vis").offsetWidth-margin.left-margin.right-20,height=document.getElementById("vis").offsetHeight-margin.top-margin.bottom,currentHistogram=-1;const NUM_DISENFRANCHISED=6106327;var scrollVis=function(){// Which visualization we currently are on
var a=-1,b=0,c=[],d=[],e=function(a){a.each(function(a){f(a),g()})},f=function(){d3.select("#vis").style("height",NUM_DISENFRANCHISED/width+"px"),d3.select("#dot").style("background-color","black").style("margin","0 auto").style("transition","0.5s"),d3.select(".step:nth-of-type(3)").style("padding-bottom",NUM_DISENFRANCHISED/width+"px")},g=function(){c[0]=function(){d3.select("#dot").style("width","10px").style("height","10px").style("margin-top","200px")},d[0]=function(){},c[1]=c[0],d[1]=function(){},c[2]=function(){d3.select("#dot").style("width",width+"px").style("height",NUM_DISENFRANCHISED/width+"px").style("margin-top",0)},d[2]=function(){},c[3]=function(){console.log("switching")},d[3]=function(){}};// return chart function
return e.activate=function(d){b=d;var e=0>b-a?-1:1,f=d3.range(a+e,b+e,e);f.forEach(function(a){c[a]()}),a=b},e.update=function(a,b){d[a](b)},e},plot=scrollVis();// Start visualization
d3.select("#vis").call(plot);var scroll=scroller().container(d3.select("#scrolling-vis"));scroll(d3.selectAll(".step")),scroll.on("active",function(a){d3.selectAll(".step").classed("active",function(b,c){return c===a}).style("opacity",function(b,c){return c===a?1:.1}),plot.activate(a)}),scroll.on("progress",function(a,b){plot.update(a,b)});let resizeTimer;// Handle Resize
d3.select(window).on("resize",function(){clearTimeout(resizeTimer),resizeTimer=setTimeout(function(){},50)});